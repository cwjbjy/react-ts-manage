"use strict";(self.webpackChunkreact_ts_manage=self.webpackChunkreact_ts_manage||[]).push([[651],{4561:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var a=t(9439),s=t(2791),r=t(8474),o=t(6988),u=t(4692),c=t(4484),i=t(8138),l=t(1991),d=t(7539),f=t(2162),m=t(6452),x=t(4188),h=t(7987),Z=t(9389),j=t(184),b=function(e){var n=e.getPass;return(0,j.jsx)(h.Z,{name:"basic",children:(0,j.jsx)(h.Z.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:(0,j.jsx)(Z.Z.Password,{onChange:function(e){n(e.target.value)}})})})},g=s.memo(b),p=t(1752),v=t(2622),k=t(2209),C=t(2641),w=t(5820),P=t(7777),S=t(2360),_=function(e){var n=e.tableData,t=e.onModal,a=e.onDelete,r=(0,s.useCallback)((function(e){t({isModalVisible:!0,info:e})}),[t]),o=(0,s.useMemo)((function(){return[{title:"\u7528\u6237\u540d",dataIndex:"user_name"},{title:"\u5355\u51fb\u56fe\u50cf\u53ef\u4ee5\u653e\u5927",dataIndex:"photo",align:"center",render:function(e){return(0,j.jsx)(k.Z,{width:40,src:"".concat("https://wen.caowj.top/images/").concat(e)})}},{title:"\u89d2\u8272\u63cf\u8ff0",dataIndex:"authority",render:function(e){return(0,j.jsx)("span",{className:1===e?"blue":"",children:1===e?"\u7ba1\u7406\u5458":"\u666e\u901a\u7528\u6237"})}},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"createTime"},{title:"\u64cd\u4f5c",key:"action",render:function(e,n){return(0,j.jsx)(j.Fragment,{children:"1"===n.authority?(0,j.jsx)(C.ZP,{type:"text",className:"blue",icon:(0,j.jsx)(p.Z,{}),onClick:function(){return r(n)},children:"\u7f16\u8f91"}):(0,j.jsx)(w.Z,{title:"\u786e\u8ba4\u5220\u9664?",onConfirm:function(){return a(n)},okText:"Yes",cancelText:"No",children:(0,j.jsx)(C.ZP,{type:"text",className:"red",icon:(0,j.jsx)(v.Z,{}),children:"\u5220\u9664"})})})}}]}),[a,r]);return(0,j.jsx)(I,{bordered:!0,columns:o,dataSource:n})},y=(0,s.memo)(_),I=(0,S.ZP)(P.Z).withConfig({componentId:"sc-7bold8-0"})(["margin-top:10px;.blue{color:blue;}.red{color:red;}"]),M=function(){var e=(0,s.useState)(),n=(0,a.Z)(e,2),t=n[0],h=n[1],Z=(0,s.useState)(!1),b=(0,a.Z)(Z,2),p=b[0],v=b[1],k=(0,s.useState)(""),C=(0,a.Z)(k,2),w=C[0],P=C[1],S=(0,s.useState)([]),_=(0,a.Z)(S,2),I=_[0],M=_[1],N=(0,s.useMemo)((function(){var e;return null===(e=d.ls.get("userInfo"))||void 0===e?void 0:e.userName}),[]),D=(0,s.useCallback)((function(e){var n=e.isModalVisible,t=e.info;v(n),h(t)}),[]),F=(0,r.Z)(f.EA,{onSuccess:function(e){M(function(e){var n=[];return e.forEach((function(e,t){var a=Object.assign({},e,{key:t});n.push(a)})),n}(e.data))}}),T=F.run,q=F.loading,E=(0,r.Z)(f.Nq,{manual:!0,onSuccess:function(e,n){o.ZP.success({content:"\u5bc6\u7801\u4fee\u6539\u6210\u529f"}),d.ls.set(m.CD,{userName:null===t||void 0===t?void 0:t.user_name,passWord:w,flag:!0})}}).run,O=(0,r.Z)(f.h8,{manual:!0,onSuccess:function(){o.ZP.success({content:"\u5220\u9664\u6210\u529f"}),T()}}).run,V=(0,s.useCallback)((function(e){var n=e.id;O({id:n})}),[O]),A=(0,s.useCallback)((function(){var e=t,n=e.id,a=e.user_name;E({id:n,user_name:a,password:l.Z.MD5(w).toString()}),v(!1)}),[E,t,w]),W=(0,s.useCallback)((function(e){return P(e)}),[]);return N!==x.up?(0,j.jsx)(j.Fragment,{children:"\u7ba1\u7406\u5458\u8d26\u6237\u65b9\u53ef\u67e5\u770b"}):(0,j.jsx)("section",{children:q?(0,j.jsx)(u.Z,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(c.Z,{hoverable:!0,children:[(0,j.jsx)("strong",{children:"\u7ba1\u7406\u5458\u53ef\u4fee\u6539\u5bc6\u7801\uff0c\u666e\u901a\u7528\u6237\u53ef\u5220\u9664"}),(0,j.jsx)(y,{tableData:I,onModal:D,onDelete:V})]}),(0,j.jsx)(i.Z,{title:"\u4fee\u6539\u5bc6\u7801",open:p,onOk:A,onCancel:function(){return v(!1)},children:(0,j.jsx)(g,{getPass:W})})]})})}}}]);